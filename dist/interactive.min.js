var Interactive=function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=11)}([function(t,e){t.exports=THREE},function(t,e){t.exports=math},function(t,e,i){"use strict";function s(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),s(i(12)),s(i(3)),s(i(16)),s(i(17)),s(i(20))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(2),r=i(0),o=i(0),a=i(4),n=i(5),l=i(6),h=i(8),u=i(9),d=i(10),c=i(14),p=i(15);e.Axes2D=class extends s.Axes{constructor(t){super(t),this.camera=new r.OrthographicCamera(t.left,t.right,t.top,t.bottom,0,20),this.camera.position.z=10,this.camera.lookAt(this.getScene().position),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.hotspots=[],this.activeHotspot=null;let e=null,i=null,s=(t,s)=>{e=[t,s],i=this.camera.position.clone()},a=(t,s)=>{let r=this.getContainer().getBoundingClientRect(),o=[t-e[0],s-e[1]],a=[this.right-this.left,this.top-this.bottom],n=[o[0]/r.width*a[0],o[1]/r.height*a[1]];this.camera.position.x=i.x-n[0],this.camera.position.y=i.y+n[1],this.camera.updateMatrix(),this.getPlot().requestFrame()},n=(t,e)=>{let i=this.getContainer().getBoundingClientRect(),s=new r.Vector2(t-i.left,e-i.top),o=l(s);this.activeHotspot.setPosition(o)};var l=t=>{let e=t.x/this.getContainer().clientWidth,i=t.y/this.getContainer().clientHeight,s=this.left+e*(this.right-this.left)+this.camera.position.x,r=this.top-i*(this.top-this.bottom)+this.camera.position.y;return new o.Vector2(s,r)},h=(t,e)=>{let i=this.getContainer().getBoundingClientRect(),s=new r.Vector2(t-i.left,e-i.top);this.activeHotspot=null;for(let t of this.hotspots){let e=this.project(t.getPosition()).distanceToSquared(s);e<=400&&e<1e6&&(this.activeHotspot=t)}};this.getContainer().addEventListener("mousedown",t=>{1&t.buttons&&(h(t.clientX,t.clientY),null==this.activeHotspot&&s(t.clientX,t.clientY))}),this.getContainer().addEventListener("mousemove",t=>{1&t.buttons&&(null==this.activeHotspot?a(t.clientX,t.clientY):n(t.clientX,t.clientY))}),this.getContainer().addEventListener("mouseup",t=>{1&t.buttons&&null==this.activeHotspot&&((t,s)=>{e=null,i=null})(t.clientX,t.clientY)})}addFigure(t){return t instanceof a.Hotspot2D&&this.hotspots.push(t),super.addFigure(t)}removeFigure(t){if(t instanceof a.Hotspot2D){let e=this.hotspots.indexOf(t);e>=0&&this.hotspots.splice(e,1)}return super.removeFigure(t)}getCamera(){return this.camera}project(t){let e=(t.x-this.camera.position.x-this.left)/(this.right-this.left),i=(t.y-this.camera.position.y-this.bottom)/(this.top-this.bottom),s=e*this.getContainer().clientWidth,r=(1-i)*this.getContainer().clientHeight;return new o.Vector2(s,r)}plotExpression(t,e,i){let s=Object.assign({},i);switch(e){case"angle":var r=t.split(/{|,|}/g);s.a=r[1],s.b=r[2];let i=new d.AngleArc2D(s);this.addFigure(i);break;case"arrow":s.end=t;let o=new l.Arrow2D(s);this.addFigure(o);break;case"label":s.axes=this,s.label=t;let f=new n.Label2D(s);this.addFigure(f);break;case"point":s.position=t;let v=new h.Point2D(s);this.addFigure(v);break;case"hotspot":s.plot=this.getPlot(),s.variable=t;let w=new a.Hotspot2D(s);this.addFigure(w);break;case"parametric":r=t.split(/{|}/g),s.expression=r[0];let g=r[1].split(",");s.parameter=g[0],s.start=g[1],s.end=g[2],s.steps=g[3];let m=new u.Parametric2D(s);this.addFigure(m);break;case"polygon":let y=c.bracketAwareSplit(t.slice(1,t.length-1),",");s.vertices=y;let b=new p.Polygon2D(s);this.addFigure(b);break;default:throw new Error("Unknown figure type!")}}};e.Axes2DArgs=class extends s.AxesArgs{constructor(t){super(t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom}validate(){if(super.validate(),void 0!==this.right&&void 0!==this.left&&this.right-this.left<=0)throw new Error("Invalid arguments: left >= right.");if(void 0!==this.top&&void 0!==this.bottom&&this.top-this.bottom<=0)throw new Error("Invalid arguments: top <= bottom.");return!0}default(){super.default(),void 0===this.left&&(this.left=-10),void 0===this.right&&(this.right=10),void 0===this.top&&(this.top=10),void 0===this.bottom&&(this.bottom=-10)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0);e.Hotspot2D=class{constructor(t){let e=new r(t);e.validate(),e.defaults(),this.plot=e.plot,this.variable=e.variable,this.position=null}getPosition(){if(null==this.position){let t=this.plot.getScope()[this.variable];this.position=new s.Vector2(...t._data)}return this.position}setPosition(t){this.position=t,this.plot.execExpression(this.variable+"=["+t.toArray()+"]"),this.plot.refresh(),this.plot.requestFrame()}render(t){return null}};class r{constructor(t){this.plot=t.plot,this.variable=t.variable}validate(){if(!this.plot)throw new Error("Invalid arguments: Plot not defined!");if(!this.variable)throw new Error("Invalid arguments: Variable not defined!");return!0}defaults(){}}e.Hotspot2DArgs=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0),r=i(1),o=i(3);e.Label2D=class{constructor(t){let e=new a(t);e.validate(),e.defaults(),this.axes=e.axes,this.positionFun=r.parse(e.position).compile(),this.label=t.label;let i=document.createElement("div");i.style.position="absolute",i.style.width="100",i.style.height="100",i.style.color="white",i.style.cursor="default",i.style["pointer-events"]="none",i.style["-webkit-user-select"]="none",i.style["-moz-user-select"]="none",i.style["-ms-user-select"]="none",i.style["user-select"]="none",i.innerHTML=this.label,this.labelElement=i,document.body.appendChild(i)}render(t){let e=new s.Vector2(...this.positionFun.eval(t)._data),i=this.axes.project(e),r=this.axes.getContainer().getBoundingClientRect();return this.labelElement.style.top=window.scrollY+i.y+r.top+"px",this.labelElement.style.left=window.scrollX+i.x+r.left+"px",null}};class a{constructor(t){this.axes=t.axes,this.position=t.position,this.label=t.label}validate(){if(!this.axes)throw new Error("Invalid arguments: Axes not defined!");if(!(this.axes instanceof o.Axes2D))throw new Error("Invalid arguments: axes is not an Axes2D");if(!this.position)throw new Error("Invalid arguments: Variable not defined!");return!0}defaults(){void 0===this.label&&(this.label=this.position)}}e.Label2DArgs=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0),r=i(1),o=i(13);e.Arrow2D=class{constructor(t){let e=new a(t);e.validate(),e.defaults(),this.startFun=r.parse(e.start).compile(),this.endFun=r.parse(e.end).compile(),this.hex=e.hex,this.headLength=e.headLength,this.headWidth=e.headWidth,this.width=e.width,this.showFun=r.parse(e.show).compile()}render(t){if(0==this.showFun.eval(t))return null;let e=this.endFun.eval(t);if("Matrix"!=r.typeof(e))throw new Error("End expression does not evaluate to a vector (Matrix)!");let i=new s.Vector3(e._data[0],e._data[1],0),a=this.startFun.eval(t);if("Matrix"!=r.typeof(a))throw new Error("Start expression does not evaluate to vector (Matrix)!");let n=new s.Vector3(a._data[0],a._data[1],0),l=i.clone().sub(n).normalize(),h=i.distanceTo(n),u=this.hex,d=this.headLength,c=this.headWidth;return this.width<=0?new s.ArrowHelper(l,n,h,u,d,c):new o.LineArrowHelper(l,n,h,u,d,c,this.width)}};class a{constructor(t){this.start=t.start,this.end=t.end,this.hex=t.hex,this.headLength=t.headLength,this.headWidth=t.headWidth,this.width=t.width,this.show=t.show}validate(){if(!this.end)throw new Error("Invalid arguments: end not defined!");return!0}defaults(){void 0===this.start&&(this.start="[0,0]"),void 0===this.hex&&(this.hex=16777215),void 0===this.headLength&&(this.headLength=.2),void 0===this.headWidth&&(this.headWidth=.15),void 0===this.show&&(this.show="1"),void 0===this.width&&(this.width=.01)}}e.Arrow2DArgs=a},function(t,e,i){(function(){"use strict";var s=this.THREE||i(0);if(!s)throw new Error("MeshLine requires three.js");function r(){this.positions=[],this.colors=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this.geometry=new s.BufferGeometry,this.widthCallback=null}function o(t,e,i,s,r){var o;if(t=t.subarray||t.slice?t:t.buffer,i=i.subarray||i.slice?i:i.buffer,t=e?t.subarray?t.subarray(e,r&&e+r):t.slice(e,r&&e+r):t,i.set)i.set(t,s);else for(o=0;o<t.length;o++)i[o+s]=t[o];return i}function a(t){function e(t,e){return void 0===t?e:t}s.Material.call(this),t=t||{},this.lineWidth=e(t.lineWidth,1),this.map=e(t.map,null),this.useMap=e(t.useMap,0),this.alphaMap=e(t.alphaMap,null),this.useAlphaMap=e(t.useAlphaMap,0),this.useGlobalColor=e(t.useGlobalColor,1),this.color=e(t.color,new s.Color(16777215)),this.opacity=e(t.opacity,1),this.resolution=e(t.resolution,new s.Vector2(1,1)),this.sizeAttenuation=e(t.sizeAttenuation,1),this.near=e(t.near,1),this.far=e(t.far,1),this.dashArray=e(t.dashArray,0),this.dashOffset=e(t.dashOffset,0),this.dashRatio=e(t.dashRatio,.5),this.useDash=0!==this.dashArray?1:0,this.visibility=e(t.visibility,1),this.alphaTest=e(t.alphaTest,0),this.repeat=e(t.repeat,new s.Vector2(1,1));var i=new s.RawShaderMaterial({uniforms:{lineWidth:{type:"f",value:this.lineWidth},map:{type:"t",value:this.map},useMap:{type:"f",value:this.useMap},alphaMap:{type:"t",value:this.alphaMap},useAlphaMap:{type:"f",value:this.useAlphaMap},useGlobalColor:{type:"f",value:this.useGlobalColor},gcolor:{type:"c",value:this.color},gopacity:{type:"f",value:this.opacity},resolution:{type:"v2",value:this.resolution},sizeAttenuation:{type:"f",value:this.sizeAttenuation},near:{type:"f",value:this.near},far:{type:"f",value:this.far},dashArray:{type:"f",value:this.dashArray},dashOffset:{type:"f",value:this.dashOffset},dashRatio:{type:"f",value:this.dashRatio},useDash:{type:"f",value:this.useDash},visibility:{type:"f",value:this.visibility},alphaTest:{type:"f",value:this.alphaTest},repeat:{type:"v2",value:this.repeat}},vertexShader:["precision highp float;","","attribute vec3 position;","attribute vec4 color;","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute vec2 uv;","attribute float counters;","","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","uniform vec2 resolution;","uniform float lineWidth;","uniform float useGlobalColor;","uniform vec3 gcolor;","uniform float gopacity;","uniform float near;","uniform float far;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","\t vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","\t float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);","","    if(useGlobalColor == 1.0) {","        vColor = vec4( gcolor, gopacity );","    } else {","        vColor = color;","    }","","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","\t float pixelWidth = finalPosition.w * pixelWidthRatio;","    float w = 1.8 * pixelWidth * lineWidth * width;","","    if( sizeAttenuation == 1. ) {","        w = 1.8 * lineWidth * width;","    }","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec2 normal = vec2( -dir.y, dir.x );","    normal.x /= aspect;","    normal *= .5 * w;","","    vec4 offset = vec4( normal * side, 0.0, 1.0 );","    finalPosition.xy += offset.xy;","","    gl_Position = finalPosition;","","}"].join("\r\n"),fragmentShader:["#extension GL_OES_standard_derivatives : enable","precision mediump float;","","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","}"].join("\r\n")});return delete t.lineWidth,delete t.map,delete t.useMap,delete t.alphaMap,delete t.useAlphaMap,delete t.useGlobalColor,delete t.color,delete t.opacity,delete t.resolution,delete t.sizeAttenuation,delete t.near,delete t.far,delete t.dashArray,delete t.dashOffset,delete t.dashRatio,delete t.visibility,delete t.alphaTest,delete t.repeat,i.type="MeshLineMaterial",i.setValues(t),i}r.prototype.setGeometry=function(t,e){if(this.widthCallback=e,this.positions=[],this.counters=[],t instanceof s.Geometry)for(var i=0;i<t.vertices.length;i++){var r=t.vertices[i];e=i/t.vertices.length;this.positions.push(r.x,r.y,r.z),this.positions.push(r.x,r.y,r.z),this.colors.push(0,0,0,0),this.colors.push(0,0,0,0),this.counters.push(e),this.counters.push(e)}if(t instanceof s.BufferGeometry){var o=t.getAttribute("position").array,a=t.getAttribute("color").array;for(i=0;3*i<o.length;i+=1){e=3*i/o.length;this.positions.push(o[3*i],o[3*i+1],o[3*i+2]),this.positions.push(o[3*i],o[3*i+1],o[3*i+2]),this.colors.push(a[4*i],a[4*i+1],a[4*i+2],a[4*i+3]),this.colors.push(a[4*i],a[4*i+1],a[4*i+2],a[4*i+3]),this.counters.push(e),this.counters.push(e)}}if(t instanceof Float32Array||t instanceof Array)for(i=0;i<t.length;i+=3){e=i/t.length;this.positions.push(t[i],t[i+1],t[i+2]),this.positions.push(t[i],t[i+1],t[i+2]),this.colors.push(0,0,0,0),this.colors.push(0,0,0,0),this.counters.push(e),this.counters.push(e)}this.process()},r.prototype.compareV3=function(t,e){var i=6*t,s=6*e;return this.positions[i]===this.positions[s]&&this.positions[i+1]===this.positions[s+1]&&this.positions[i+2]===this.positions[s+2]},r.prototype.copyV3=function(t){var e=6*t;return[this.positions[e],this.positions[e+1],this.positions[e+2]]},r.prototype.process=function(){var t,e,i=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];for(var r=0;r<i;r++)this.side.push(1),this.side.push(-1);for(r=0;r<i;r++)t=this.widthCallback?this.widthCallback(r/(i-1)):1,this.width.push(t),this.width.push(t);for(r=0;r<i;r++)this.uvs.push(r/(i-1),0),this.uvs.push(r/(i-1),1);e=this.compareV3(0,i-1)?this.copyV3(i-2):this.copyV3(0),this.previous.push(e[0],e[1],e[2]),this.previous.push(e[0],e[1],e[2]);for(r=0;r<i-1;r++)e=this.copyV3(r),this.previous.push(e[0],e[1],e[2]),this.previous.push(e[0],e[1],e[2]);for(r=1;r<i;r++)e=this.copyV3(r),this.next.push(e[0],e[1],e[2]),this.next.push(e[0],e[1],e[2]);e=this.compareV3(i-1,0)?this.copyV3(1):this.copyV3(i-1),this.next.push(e[0],e[1],e[2]),this.next.push(e[0],e[1],e[2]);for(r=0;r<i-1;r++){var o=2*r;this.indices_array.push(o,o+1,o+2),this.indices_array.push(o+2,o+1,o+3)}this.attributes?(this.attributes.position.copyArray(new Float32Array(this.positions)),this.attributes.position.needsUpdate=!0,this.attributes.color.copyArray(new Float32Array(this.colors)),this.attributes.color.needsUpdate=!0,this.attributes.previous.copyArray(new Float32Array(this.previous)),this.attributes.previous.needsUpdate=!0,this.attributes.next.copyArray(new Float32Array(this.next)),this.attributes.next.needsUpdate=!0,this.attributes.side.copyArray(new Float32Array(this.side)),this.attributes.side.needsUpdate=!0,this.attributes.width.copyArray(new Float32Array(this.width)),this.attributes.width.needsUpdate=!0,this.attributes.uv.copyArray(new Float32Array(this.uvs)),this.attributes.uv.needsUpdate=!0,this.attributes.index.copyArray(new Uint16Array(this.indices_array)),this.attributes.index.needsUpdate=!0):this.attributes={position:new s.BufferAttribute(new Float32Array(this.positions),3),color:new s.BufferAttribute(new Float32Array(this.colors),4),previous:new s.BufferAttribute(new Float32Array(this.previous),3),next:new s.BufferAttribute(new Float32Array(this.next),3),side:new s.BufferAttribute(new Float32Array(this.side),1),width:new s.BufferAttribute(new Float32Array(this.width),1),uv:new s.BufferAttribute(new Float32Array(this.uvs),2),index:new s.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new s.BufferAttribute(new Float32Array(this.counters),1)},this.geometry.addAttribute("position",this.attributes.position),this.geometry.addAttribute("color",this.attributes.color),this.geometry.addAttribute("previous",this.attributes.previous),this.geometry.addAttribute("next",this.attributes.next),this.geometry.addAttribute("side",this.attributes.side),this.geometry.addAttribute("width",this.attributes.width),this.geometry.addAttribute("uv",this.attributes.uv),this.geometry.addAttribute("counters",this.attributes.counters),this.geometry.setIndex(this.attributes.index)},r.prototype.advance=function(t){var e=this.attributes.position.array,i=this.attributes.previous.array,s=this.attributes.next.array,r=e.length;o(e,0,i,0,r),o(e,6,e,0,r-6),e[r-6]=t.x,e[r-5]=t.y,e[r-4]=t.z,e[r-3]=t.x,e[r-2]=t.y,e[r-1]=t.z,o(e,6,s,0,r-6),s[r-6]=t.x,s[r-5]=t.y,s[r-4]=t.z,s[r-3]=t.x,s[r-2]=t.y,s[r-1]=t.z,this.attributes.position.needsUpdate=!0,this.attributes.previous.needsUpdate=!0,this.attributes.next.needsUpdate=!0},a.prototype=Object.create(s.Material.prototype),a.prototype.constructor=a,a.prototype.copy=function(t){return s.Material.prototype.copy.call(this,t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.useGlobalColor=check(parameters.useGlobalColor,1),this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.near=t.near,this.far=t.far,this.dashArray.copy(t.dashArray),this.dashOffset.copy(t.dashOffset),this.dashRatio.copy(t.dashRatio),this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this},t.exports&&(e=t.exports={MeshLine:r,MeshLineMaterial:a}),e.MeshLine=r,e.MeshLineMaterial=a}).call(this)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0),r=i(1);e.Point2D=class{constructor(t){let e=new o(t);e.validate(),e.defaults(),this.positionFun=r.parse(e.position).compile(),this.hex=e.hex,this.radius=e.radius}render(t){let e=new s.Vector3(...this.positionFun.eval(t)._data,0),i=new s.CircleBufferGeometry(this.radius,32),r=new s.MeshBasicMaterial({color:this.hex}),o=new s.Mesh(i,r);return o.position.copy(e),o}};class o{constructor(t){this.position=t.position,this.hex=t.hex,this.radius=t.radius}validate(){return!0}defaults(){void 0===this.hex&&(this.hex=16777215),void 0===this.radius&&(this.radius=.05)}}e.Point2DArgs=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(7),r=i(1),o=i(0);e.Parametric2D=class{constructor(t){let e=new a(t);e.validate(),e.defaults(),this.expressionFun=r.parse(e.expression).compile(),this.parameter=t.parameter,this.startFun=r.parse(e.start).compile(),this.endFun=r.parse(e.end).compile(),this.stepsFun=r.parse(e.steps).compile(),null==t.color?this.colorFun=null:this.colorFun=r.parse(e.color).compile(),this.width=e.width}render(t){let e=this,i=Object.create(t),a=this.startFun.eval(t);if("number"!=r.typeof(a))throw new Error("Start does not evaluate to a number!");let n=this.endFun.eval(t);if("number"!=r.typeof(n))throw new Error("End does not evaluate to a number!");let l=this.stepsFun.eval(t);if("number"!=r.typeof(l))throw new Error("Step does not evaluate to a number!");let h,u=function(t){return i[e.parameter]=t,e.expressionFun.eval(i)};if("Matrix"!=r.typeof(u(a)))throw new Error("Expression does not evaluate to a vector (Matrix)!");if(null!=this.colorFun){if(i[this.parameter]=a,"Matrix"!=r.typeof(this.colorFun.eval(i)))throw new Error("Color does not evaluate to a vector (Matrix)!");h=function(t){return i[e.parameter]=t,[...e.colorFun.eval(i)._data]}}else h=function(t){return[1,1,1]};let d=(n-a)/(l-1),c=new Float32Array(3*l),p=new Float32Array(4*l);for(let t=0;t<l;t++){let e=a+t*d,i=u(e),s=h(e);c[3*t]=i._data[0],c[3*t+1]=i._data[1],c[3*t+2]=0,p[4*t]=s[0],p[4*t+1]=s[1],p[4*t+2]=s[2],p[4*t+3]=1}let f=new o.BufferGeometry;f.addAttribute("position",new o.BufferAttribute(c,3)),f.addAttribute("color",new o.BufferAttribute(p,4));let v=new s.MeshLine;v.setGeometry(f);let w=new s.MeshLineMaterial({useGlobalColor:0,lineWidth:this.width});return new o.Mesh(v.geometry,w)}};class a{constructor(t){this.expression=t.expression,this.parameter=t.parameter,this.start=t.start,this.end=t.end,this.steps=t.steps,this.color=t.color,this.width=t.width}validate(){if(!this.expression)throw new Error("Invalid arguments: expression not defined!");if(!this.parameter)throw new Error("Invalid arguments: parameter (variable) not defined!");if(void 0===this.start)throw new Error("Invalid arguments: start not defined!");if(void 0===this.end)throw new Error("Invalid arguments: end not defined!");return!0}defaults(){void 0===this.steps&&(this.steps="50"),void 0===this.color&&(this.color=null),void 0===this.width&&(this.width=.01)}}e.Parametric2DArgs=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0),r=i(1);e.AngleArc2D=class{constructor(t){let e=new o(t);e.validate(),e.defaults(),this.aFun=r.parse(e.a).compile(),this.bFun=r.parse(e.b).compile(),this.hex=e.hex,this.radius=e.radius}render(t){let e,i=new s.Vector2(...this.aFun.eval(t)._data),r=new s.Vector2(...this.bFun.eval(t)._data),o=Math.atan2(i.y,i.x),a=Math.atan2(r.y,r.x),n=o-a<Math.PI&&o-a>=0;if(Math.abs(i.dot(r))<.01){let t=i.clone().normalize().multiplyScalar(this.radius),s=r.clone().normalize().multiplyScalar(this.radius),o=t.clone().add(s);e=[t,o,s]}else e=new s.EllipseCurve(0,0,this.radius,this.radius,o,a,n,0).getSpacedPoints(20);let l=new s.LineBasicMaterial({color:this.hex});return new s.Line((new s.Geometry).setFromPoints(e),l)}};class o{constructor(t){this.origin=t.origin,this.a=t.a,this.b=t.b,this.hex=t.hex,this.radius=t.radius}validate(){if(!this.a)throw new Error("Invalid arguments: a not defined!");if(!this.b)throw new Error("Invalid arguments: b not defined!");return!0}defaults(){void 0===this.origin&&(this.origin="[0,0]"),void 0===this.hex&&(this.hex=16777215),void 0===this.radius&&(this.radius=.2)}}e.AngleArc2DArgs=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(2);e.Axes2D=s.Axes2D,e.Axes2DArgs=s.Axes2DArgs,e.Axes3D=s.Axes3D,e.Axes3DArgs=s.Axes3DArgs,e.Plot=s.Plot;var r=i(10);e.AngleArc2D=r.AngleArc2D,e.AngleArc2DArgs=r.AngleArc2DArgs;var o=i(6);e.Arrow2D=o.Arrow2D,e.Arrow2DArgs=o.Arrow2DArgs;var a=i(4);e.Hotspot2D=a.Hotspot2D,e.Hotspot2DArgs=a.Hotspot2DArgs;var n=i(5);e.Label2D=n.Label2D,e.Label2DArgs=n.Label2DArgs;var l=i(9);e.Parametric2D=l.Parametric2D,e.Parametric2DArgs=l.Parametric2DArgs;var h=i(21);e.Parallelogram2D=h.Parallelogram2D,e.Parallelogram2DArgs=h.Parallelogram2DArgs;var u=i(8);e.Point2D=u.Point2D,e.Point2DArgs=u.Point2DArgs},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(2),r=i(0);e.Axes=class{constructor(t){t.validate(),t.default(),this.plot=t.plot,this.container=t.container,this.width=t.width,this.height=t.height,this.antialias=t.antialias,this.renderer=null,this.scene=new r.Scene,this.figures=new Set,this.objMap=new Map,this.skip=new Set,this.wake()}addFigure(t){return!this.figures.has(t)&&(this.figures.add(t),this.objMap.set(t,null),!0)}removeFigure(t){return!!this.figures.has(t)&&(this.figures.delete(t),this.objMap.delete(t),!0)}refresh(t){let e=this.objMap.get(t);null!=e&&this.scene.remove(e),this.objMap.set(t,null),this.skip.delete(t)}refreshAll(){for(let t of this.figures)this.refresh(t)}render(){null!=this.renderer&&(this.recalculate(),this.renderer.render(this.scene,this.getCamera()))}sleep(){null!=this.renderer&&(this.renderer.forceContextLoss(),this.renderer.context=null,this.renderer.domElement=null,this.renderer=null)}wake(){null==this.renderer&&(this.renderer=new r.WebGLRenderer({antialias:this.antialias}),this.renderer.setSize(this.width,this.height),this.container.innerHTML="",this.container.appendChild(this.renderer.domElement))}getPlot(){return this.plot}getContainer(){return this.container}isSleeping(){return null==this.renderer}getRenderer(){return this.renderer}getScene(){return this.scene}recalculate(){for(let t of this.figures){let e=this.objMap.get(t);if(null==e&&!this.skip.has(t)){let i=!0;try{e=t.render(this.plot.getScope())}catch(e){i=!1,console.error(e),console.warn("Figure not rendered!"),this.skip.add(t)}i&&e&&(this.objMap.set(t,e),this.scene.add(e))}}}};e.AxesArgs=class{constructor(t){this.plot=t.plot,this.container=t.container}validate(){if(!this.plot)throw new Error("Invalid arguments: Parent plot not defined!");if(!(this.plot instanceof s.Plot))throw new Error("Invalid arguments: Parent plot is not an instance of Plot!");if(!this.container)throw new Error("Invalid arguments: container (HTMLElement) not defined!");if(!(this.container instanceof HTMLElement))throw new Error("Invalid arguments: container is not an instance of HTMLElement!");if(void 0===this.width&&0==this.container.clientWidth)throw new Error("Invalid arguments: container has client width 0!");if(void 0===this.height&&0==this.container.clientHeight)throw new Error("Invalid arguments: container has client height 0!");if(void 0!==this.width&&this.width<=0)throw new Error("Invalid arguments: width <= 0!");if(void 0!==this.height&&this.height<=0)throw new Error("Invalid arguments: height <= 0!");return!0}default(){void 0===this.width&&(this.width=this.container.clientWidth),void 0===this.height&&(this.height=this.container.clientHeight),void 0===this.antialias&&(this.antialias=!0)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(7),r=i(0);e.LineArrowHelper=class extends r.Object3D{constructor(t,e,i,o,a,n,l){super(),void 0===t&&(t=new r.Vector3(0,0,1)),void 0===e&&(e=new r.Vector3(0,0,0)),void 0===i&&(i=1),void 0===o&&(o=16776960),void 0===a&&(a=.2*i),void 0===n&&(n=.2*a),void 0===l&&(l=.01);let h=e.clone().add(t.clone().multiplyScalar(i-a)),u=new r.Geometry;u.vertices.push(e),u.vertices.push(h);let d=new s.MeshLine;d.setGeometry(u);let c=new s.MeshLineMaterial({lineWidth:l,color:new r.Color(o)});this.add(new r.Mesh(d.geometry,c)),this.add(new r.ArrowHelper(t,e,i,o,a,n))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bracketAwareSplit=function(t,e){let i=[""],s=0;for(let r of t)"("!=r&&"["!=r&&"{"!=r||s++,")"!=r&&"]"!=r&&"}"!=r||s--,0==s&&e.includes(r)?i.push(""):i[i.length-1]+=r;return i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0),r=i(1),o=i(0);e.Polygon2D=class{constructor(t){let e=new a(t);e.validate(),e.defaults(),this.vertexFuns=e.vertices.map(t=>r.parse(t).compile()),this.opacity=e.opacity}render(t){let e=this.vertexFuns.map(e=>new s.Vector2(...e.eval(t)._data)),i=new o.Geometry,r=0;for(let t of e){if(i.vertices.push(new s.Vector3(t.x,t.y,0)),r>1){var a=new o.Face3(0,r,r-1);i.faces.push(a)}r++}let n=new o.MeshBasicMaterial({color:16777215,side:o.DoubleSide,opacity:this.opacity,transparent:!0});return new o.Mesh(i,n)}};class a{constructor(t){this.vertices=t.vertices,this.opacity=t.opacity}validate(){if(!this.vertices)throw new Error("Invalid arguments: vertices not defined!");return!0}defaults(){void 0===this.opacity&&(this.opacity=1)}}e.Polygon2DArgs=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(2),r=i(0);e.Axes3D=class extends s.Axes{constructor(t){super(t),this.camera=new r.PerspectiveCamera}getCamera(){throw new Error("Method not implemented.")}};e.Axes3DArgs=class extends s.AxesArgs{}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),r=i(18),o=i(19);var a;e.Panel=class{constructor(t){let e=new n(t);e.validate(),e.defaults(),this.plot=e.plot,this.container=e.container,this.panelComponents=[]}createSlider(t){t.plot=this.plot;let e=r.createElement(a.Slider,Object.assign({},t,{key:this.panelComponents.length}));this.append(e)}addReadout(t,e){let i=Object.assign({},e);i.plot=this.plot,i.expression=t;let s=r.createElement(a.Readout,Object.assign({},i,{key:this.panelComponents.length}));this.append(s)}addCheckBox(t,e){let i=Object.assign({},e);i.plot=this.plot,i.variable=t;let s=r.createElement(a.CheckBox,Object.assign({},i,{key:this.panelComponents.length}));this.append(s)}append(t){this.panelComponents.push(t),o.render(r.createElement("div",null,this.panelComponents.map(t=>r.createElement("div",null,t))),this.container)}},function(t){t.Slider=class extends r.Component{constructor(e){super(e),this.args=new t.SliderArgs(e),this.args.validate(),this.args.defaults()}render(){let t=(this.args.end-this.args.start)/(this.args.steps-1),e=this.args.plot.getScope()[this.args.variable];return"number"!=s.typeof(e)&&(e=this.args.start,this.args.plot.setConstant(this.args.variable,e)),[this.args.variable+":",r.createElement("input",{type:"range",min:this.args.start,max:this.args.end,step:t,defaultValue:e,onInput:()=>{this.args.plot.setConstant(this.args.variable,parseFloat(this.sliderElement.value)),this.args.plot.refresh(),this.args.plot.requestFrame()},ref:t=>this.sliderElement=t,key:"1"})]}};t.SliderArgs=class{constructor(t){this.plot=t.plot,this.variable=t.variable,this.start=t.start,this.end=t.end,this.steps=t.steps,this.continuousUpdate=t.continuousUpdate}validate(){if(void 0===this.plot)throw new Error("Invalid arguments: Plot not defined!");if(void 0===this.variable)throw new Error("Invalid arguments: Variable not defined!");if(void 0===this.start)throw new Error("Invalid arguments: Start not defined!");if(void 0===this.end)throw new Error("Invalid arguments: End not defined!");return!0}defaults(){void 0===this.steps&&(this.steps=50),void 0===this.continuousUpdate&&(this.continuousUpdate=!0)}};t.Readout=class extends r.Component{constructor(e){super(e),this.args=new t.ReadoutArgs(e),this.args.validate(),this.args.defaults();let i=()=>{let t="N/A";try{t=(t=""+this.args.plot.evalExpression(this.args.expression)).replace(/(\.\d\d\d)\d*/g,"$1")}catch(t){t instanceof Error&&t.message.includes("Undefined symbol")||console.warn(t)}return t};this.state={value:i()};let s=()=>{this.setState({value:i()})};this.args.plot.onRefresh(s),this.args.plot.onExecExpression(s)}render(){return[this.args.label+" =",r.createElement("input",{key:"1",type:"text",disabled:!0,value:this.state.value})]}};t.ReadoutArgs=class{constructor(t){this.plot=t.plot,this.expression=t.expression,this.label=t.label}validate(){if(void 0===this.plot)throw new Error("Invalid arguments: Plot not defined!");if(void 0===this.expression)throw new Error("Invalid arguments: Variable not defined!");return!0}defaults(){void 0===this.label&&(this.label=this.expression)}};t.CheckBox=class extends r.Component{constructor(e){super(e),this.args=new t.CheckBoxArgs(e),this.args.validate(),this.args.defaults()}render(){let t=this.args.plot.getScope()[this.args.variable];return"number"!=s.typeof(t)&&(t=0,this.args.plot.setConstant(this.args.variable,t)),[this.args.label+":",r.createElement("input",{type:"checkbox",onInput:()=>{let t=this.checkBoxElement.checked?1:0;this.args.plot.setConstant(this.args.variable,t),this.args.plot.refresh(),this.args.plot.requestFrame()},defaultChecked:t,ref:t=>this.checkBoxElement=t,key:"1"})]}};t.CheckBoxArgs=class{constructor(t){this.plot=t.plot,this.variable=t.variable,this.label=t.label}validate(){if(void 0===this.plot)throw new Error("Invalid arguments: Plot not defined!");if(void 0===this.variable)throw new Error("Invalid arguments: Variable not defined!");return!0}defaults(){void 0===this.label&&(this.label=this.variable)}}}(a=e.PanelComponent||(e.PanelComponent={}));class n{constructor(t){this.plot=t.plot,this.container=t.container}validate(){if(void 0===this.plot)throw new Error("Invalid arguments: Plot not defined!");if(void 0===this.container)throw new Error("Invalid arguments: Container not defined!");return!0}defaults(){}}e.PanelArgs=n},function(t,e){t.exports=React},function(t,e){t.exports=ReactDOM},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(2),r=i(1);e.Plot=class{constructor(){this.axes=new Set,this.scope={},this.refreshCallbacks=[],this.execExpressionCallbacks=[],this.renderMutex=!1,Math.pow(2,-52);let t=Math.pow(2,-26);this.scope.nderivative=function(e,i){if("number"!=r.typeof(i))throw new Error("Invalid argument for x");let s=r.max(r.abs(t*i),t)/2;return r.divide(r.subtract(e(i+s),e(i-s)),2*s)},this.scope.lerp=function(t,e,i){if("number"!=r.typeof(i))throw new Error("Invalid argument for alpha");return r.add(r.multiply(1-i,t),r.multiply(i,e))};let e=t=>{var e=t.getBoundingClientRect().top;return t.getBoundingClientRect().bottom>=0&&e<=window.innerHeight};window.addEventListener("scroll",()=>{for(let t of this.axes)e(t.getContainer())?(t.isSleeping()&&t.wake(),t.render()):t.isSleeping()||t.sleep()})}createAxes2D(t){let e=new s.Axes2DArgs(t);e.plot=this;let i=new s.Axes2D(e);return this.addAxes(i),i}createAxes3D(t){throw new s.Axes3DArgs(t).plot=this,new Error("Method not implemented.")}dropAxes(t){return this.axes.delete(t)}createPanel(t){let e=new s.PanelArgs(t);return e.plot=this,new s.Panel(e)}render(){for(let t of this.axes)t.isSleeping()||t.render()}requestFrame(){this.renderMutex||(this.renderMutex=!0,requestAnimationFrame(()=>{this.render(),this.renderMutex=!1}))}refresh(){for(let t of this.axes)t.refreshAll();for(let t of this.refreshCallbacks)t()}sleep(){throw new Error("Method not implemented.")}wake(){throw new Error("Method not implemented.")}execExpression(t){let e=r.eval(t,this.scope);for(let e of this.execExpressionCallbacks)e(t);return e}evalExpression(t){return r.eval(t,this.scope)}setConstant(t,e){this.scope[t]=e}onRefresh(t){this.refreshCallbacks.push(t)}onExecExpression(t){this.execExpressionCallbacks.push(t)}getScope(){return Object.create(this.scope)}addAxes(t){this.axes.add(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0),r=i(1),o=i(0);e.Parallelogram2D=class{constructor(t){let e=new a(t);e.validate(),e.defaults(),this.uFun=r.parse(e.u).compile(),this.vFun=r.parse(e.v).compile(),this.opacity=e.opacity}render(t){var e=new s.Vector3(0,0,0),i=new s.Vector3(...this.uFun.eval(t)._data,-.1),r=new s.Vector3(...this.vFun.eval(t)._data,-.1),a=new s.Geometry;a.vertices.push(e),a.vertices.push(e.clone().add(i)),a.vertices.push(e.clone().add(r)),a.vertices.push(e.clone().add(i).add(r));var n=new s.Face3(3,1,0),l=new s.Face3(0,2,3);a.faces.push(n),a.faces.push(l);var h=new s.MeshBasicMaterial({color:16777215,side:o.DoubleSide,opacity:this.opacity,transparent:!0});return new s.Mesh(a,h)}};class a{constructor(t){this.u=t.u,this.v=t.v,this.opacity=t.opacity}validate(){if(!this.u||!this.v)throw new Error("Invalid arguments: u or v not defined!");return!0}defaults(){void 0===this.opacity&&(this.opacity=1)}}e.Parallelogram2DArgs=a}]);